<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="ZONFEM - Control prenatal especializado con matronas experimentadas">
  <title>ZONFEM - Control Prenatal Especializado</title>
  <!-- Tailwind CSS v3.4+ -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'instagram-purple': '#833AB4',
            'instagram-pink': '#C13584',
            'instagram-red': '#E1306C',
            'instagram-orange': '#F56040',
            'instagram-yellow': '#FCAF45',
            'light-bg': '#fafafa',
            'card-bg': '#ffffff',
            'text-dark': '#262626',
            'text-light': '#8e8e8e',
            'border-color': '#dbdbdb',
          },
          backgroundImage: {
            'instagram-gradient': 'linear-gradient(45deg, #833AB4, #C13584, #E1306C, #FD1D1D, #F56040, #F77737, #FCAF45)',
          },
          boxShadow: {
            'light': '0 2px 10px rgba(0,0,0,0.08)',
            'medium': '0 4px 12px rgba(0,0,0,0.12)',
            'heavy': '0 5px 25px rgba(0,0,0,0.15)',
          },
          animation: {
            'fadeIn': 'fadeIn 0.5s ease-in',
            'modalFadeIn': 'modalFadeIn 0.3s ease-out',
            'slideIn': 'slideIn 0.3s ease-out',
            'slideOut': 'slideOut 0.3s ease-in',
          },
          keyframes: {
            fadeIn: {
              from: { opacity: 0, transform: 'translateY(20px)' },
              to: { opacity: 1, transform: 'translateY(0)' },
            },
            modalFadeIn: {
              from: { opacity: 0, transform: 'scale(0.9) translateY(-20px)' },
              to: { opacity: 1, transform: 'scale(1) translateY(0)' },
            },
            slideIn: {
              from: { transform: 'translateX(100%)', opacity: 0 },
              to: { transform: 'translateX(0)', opacity: 1 },
            },
            slideOut: {
              from: { transform: 'translateX(0)', opacity: 1 },
              to: { transform: 'translateX(100%)', opacity: 0 },
            },
          }
        }
      }
    }
  </script>
  <style type="text/css">
    /* Estilos para el degradado del texto */
    .text-instagram-gradient {
      background: linear-gradient(45deg, #833AB4, #C13584, #E1306C, #FD1D1D, #F56040, #F77737, #FCAF45);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    /* Estilos para los pasos del seguimiento */
    .step-completed { background: #C13584; color: white; }
    .step-current { background: #833AB4; color: white; }
    .step-pending { background: #e0e0e0; color: #9e9e9e; }
    .step-line.completed { background: #C13584; }
    /* Estados de pedido */
    .status-pending { background: #fff3cd; color: #856404; }
    .status-processing { background: #cce7ff; color: #004085; }
    .status-shipped { background: #d1ecf1; color: #0c5460; }
    .status-delivered { background: #d4edda; color: #155724; }
    /* Scrollbar personalizada */
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
    }
    .custom-scrollbar::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #C13584;
      border-radius: 10px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #833AB4;
    }
    /* Estilo para el logo SVG */
    .logo-svg {
      width: 56px; /* Ajusta el ancho del SVG */
      height: 56px; /* Ajusta la altura del SVG */
      flex-shrink: 0; /* Evita que el SVG se encoja */
    }
    /* Estilo para el texto del logo */
    .logo-text {
      font-size: 2rem; /* Ajusta el tamaño del texto */
      font-weight: bold;
      background: linear-gradient(45deg, #ff2ea9, #ff6ab8, #ffb72a); /* Degradado del texto */
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: inline-block;
      line-height: 1; /* Ajusta el espaciado interno */
    }
    /* Ajuste para la altura del chat */
    .chat-container {
      height: 500px; /* Altura fija inicial */
    }
    .chat-container.minimized {
      height: 60px !important; /* Altura cuando está minimizado */
    }
    /* Clase para ocultar elementos */
    .hidden { display: none; }
  </style>
</head>
<body class="bg-light-bg text-text-dark font-sans leading-relaxed">
  <!-- Header -->
  <header class="bg-card-bg py-4 px-5 flex justify-between items-center shadow-light border-b border-border-color sticky top-0 z-50">
    <!-- Logo SVG + Texto -->
    <div class="flex items-center gap-2">
      <svg class="logo-svg" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="grad" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" stop-color="#ff2ea9"/>
            <stop offset="50%" stop-color="#ff6ab8"/>
            <stop offset="100%" stop-color="#ffb72a"/>
          </linearGradient>
        </defs>
        <path d="M50 80 
                 C20 60, 20 130, 60 120
                 C110 110, 110 60, 150 60
                 C190 60, 190 110, 240 120
                 C280 130, 280 60, 250 80
                 C220 100, 210 160, 180 200
                 C165 220, 135 220, 120 200
                 C90 160, 80 100, 50 80Z"
              fill="none"
              stroke="url(#grad)"
              stroke-width="18"
              stroke-linecap="round"
              stroke-linejoin="round"/>
      </svg>
      <span class="logo-text">ZONFEM</span>
    </div>
    <nav>
      <ul class="flex list-none">
        <li class="ml-5">
          <a href="#home" class="nav-link active text-text-dark font-medium transition-all duration-300 relative cursor-pointer py-2 px-3 rounded flex items-center gap-2 hover:text-instagram-pink hover:bg-opacity-10 hover:bg-instagram-pink" data-page="home">
            <i class="fas fa-home"></i> Inicio
          </a>
        </li>
        <li class="ml-5">
          <a href="#consultas" class="nav-link text-text-dark font-medium transition-all duration-300 relative cursor-pointer py-2 px-3 rounded flex items-center gap-2 hover:text-instagram-pink hover:bg-opacity-10 hover:bg-instagram-pink" data-page="consultas">
            <i class="fas fa-calendar-check"></i> Consultas
          </a>
        </li>
        <li class="ml-5">
          <a href="#cursos" class="nav-link text-text-dark font-medium transition-all duration-300 relative cursor-pointer py-2 px-3 rounded flex items-center gap-2 hover:text-instagram-pink hover:bg-opacity-10 hover:bg-instagram-pink" data-page="cursos">
            <i class="fas fa-book"></i> Cursos
          </a>
        </li>
        <li class="ml-5">
          <a href="#contacto" class="nav-link text-text-dark font-medium transition-all duration-300 relative cursor-pointer py-2 px-3 rounded flex items-center gap-2 hover:text-instagram-pink hover:bg-opacity-10 hover:bg-instagram-pink" data-page="contacto">
            <i class="fas fa-address-book"></i> Contacto
          </a>
        </li>
      </ul>
    </nav>
    <div class="header-icons flex gap-4 relative">
      <div class="icon text-xl cursor-pointer text-text-dark transition-all duration-300 relative w-10 h-10 flex items-center justify-center rounded-full hover:bg-instagram-gradient hover:text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/30" onclick="openSearch()" title="Buscar" aria-label="Buscar">
        <i class="fas fa-search"></i>
      </div>
      <div class="icon text-xl cursor-pointer text-text-dark transition-all duration-300 relative w-10 h-10 flex items-center justify-center rounded-full hover:bg-instagram-gradient hover:text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/30" onclick="openLoginModal()" title="Iniciar sesión" aria-label="Iniciar sesión">
        <i class="fas fa-user"></i>
      </div>
      <div class="icon text-xl cursor-pointer text-text-dark transition-all duration-300 relative w-10 h-10 flex items-center justify-center rounded-full hover:bg-instagram-gradient hover:text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/30" onclick="openCart()" title="Carrito de compras" aria-label="Carrito de compras">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count absolute -top-2 -right-2 bg-instagram-red text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold" id="cartCount">0</span>
      </div>
    </div>
  </header>
  <!-- Página de Inicio -->
  <main>
    <div id="home" class="content-page active max-w-6xl mx-auto my-8 p-5 animate-fadeIn">
      <!-- Carrusel -->
      <div class="carousel-container relative max-w-6xl mx-auto my-8 overflow-hidden bg-card-bg p-5 rounded-2xl shadow-medium border border-border-color">
        <div class="carousel flex transition-transform duration-500 ease-in-out">
          <div class="carousel-item min-w-full flex items-center p-5 gap-8">
            <img src="Mujer embarazada" class="carousel-image w-80 h-80 object-cover rounded-xl shadow-medium transition-all duration-300 hover:scale-102" alt="Mujer embarazada recibiendo atención">
            <div class="carousel-text flex-1">
              <h2 class="text-3xl text-text-dark mb-4 text-instagram-gradient flex items-center gap-3">
                <i class="fas fa-venus"></i> Control prenatal
              </h2>
              <p class="text-lg leading-relaxed mb-6 text-text-light">
                Seguimiento y cuidados especializados durante todo tu embarazo. Nuestras matronas te acompañarán en cada etapa para garantizar tu bienestar y el de tu bebé.
              </p>
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="alert('¡Consulta agendada! Te contactaremos para confirmar la fecha.')">
                <i class="fas fa-calendar-plus"></i> Agendar consulta
              </button>
              <button class="btn btn-cart py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-orange text-white ml-3 hover:bg-orange-600 hover:-translate-y-1 hover:shadow-lg hover:shadow-orange-500/40" onclick="addToCart('Control prenatal', 120000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
          <div class="carousel-item min-w-full flex items-center p-5 gap-8">
            <img src="Matrona" class="carousel-image w-80 h-80 object-cover rounded-xl shadow-medium transition-all duration-300 hover:scale-102" alt="Matrona atendiendo a una paciente">
            <div class="carousel-text flex-1">
              <h2 class="text-3xl text-text-dark mb-4 text-instagram-gradient flex items-center gap-3">
                <i class="fas fa-user-md"></i> Atención especializada
              </h2>
              <p class="text-lg leading-relaxed mb-6 text-text-light">
                Con nuestras matronas experimentadas y certificadas. Contamos con profesionales altamente capacitadas para brindarte la mejor atención durante tu embarazo, parto y postparto.
              </p>
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="alert('¡Consulta agendada! Te contactaremos para confirmar la fecha.')">
                <i class="fas fa-calendar-plus"></i> Agendar consulta
              </button>
              <button class="btn btn-cart py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-orange text-white ml-3 hover:bg-orange-600 hover:-translate-y-1 hover:shadow-lg hover:shadow-orange-500/40" onclick="addToCart('Atención especializada', 150000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
          <div class="carousel-item min-w-full flex items-center p-5 gap-8">
            <img src="Preparación al parto" class="carousel-image w-80 h-80 object-cover rounded-xl shadow-medium transition-all duration-300 hover:scale-102" alt="Clase de preparación al parto">
            <div class="carousel-text flex-1">
              <h2 class="text-3xl text-text-dark mb-4 text-instagram-gradient flex items-center gap-3">
                <i class="fas fa-baby"></i> Preparación al parto
              </h2>
              <p class="text-lg leading-relaxed mb-6 text-text-light">
                Clases y talleres especializados para tu proceso de parto. Aprende técnicas de respiración, relajación y posiciones que te ayudarán durante el trabajo de parto y nacimiento.
              </p>
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="alert('¡Clase agendada! Te contactaremos para confirmar la fecha.')">
                <i class="fas fa-calendar-plus"></i> Agendar clase
              </button>
              <button class="btn btn-cart py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-orange text-white ml-3 hover:bg-orange-600 hover:-translate-y-1 hover:shadow-lg hover:shadow-orange-500/40" onclick="addToCart('Preparación al parto', 80000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
        <div class="carousel-controls absolute top-1/2 transform -translate-y-1/2 w-full flex justify-between px-5">
          <button class="carousel-arrow bg-white bg-opacity-90 border-none text-2xl py-3 px-4 rounded-full cursor-pointer transition-all duration-300 shadow-light text-instagram-pink hover:bg-white hover:text-instagram-purple hover:scale-110" onclick="moveCarousel(-1)" aria-label="Anterior">❮</button>
          <button class="carousel-arrow bg-white bg-opacity-90 border-none text-2xl py-3 px-4 rounded-full cursor-pointer transition-all duration-300 shadow-light text-instagram-pink hover:bg-white hover:text-instagram-purple hover:scale-110" onclick="moveCarousel(1)" aria-label="Siguiente">❯</button>
        </div>
        <div class="carousel-dots flex justify-center mt-5 gap-3">
          <div class="dot w-3 h-3 rounded-full bg-gray-300 cursor-pointer transition-all duration-300 active bg-instagram-pink scale-120" onclick="goToSlide(0)" aria-label="Ir a diapositiva 1"></div>
          <div class="dot w-3 h-3 rounded-full bg-gray-300 cursor-pointer transition-all duration-300 hover:bg-instagram-purple" onclick="goToSlide(1)" aria-label="Ir a diapositiva 2"></div>
          <div class="dot w-3 h-3 rounded-full bg-gray-300 cursor-pointer transition-all duration-300 hover:bg-instagram-purple" onclick="goToSlide(2)" aria-label="Ir a diapositiva 3"></div>
        </div>
      </div>
      <!-- Secciones inferiores -->
      <div class="sections flex justify-around py-10 px-5 flex-wrap gap-6 max-w-6xl mx-auto">
        <div class="section bg-card-bg p-6 rounded-2xl shadow-light flex-1 min-w-80 max-w-sm border border-border-color transition-all duration-300 text-center hover:-translate-y-2 hover:shadow-medium">
          <h3 class="text-xl text-instagram-gradient mb-5 flex items-center justify-center gap-3">
            <i class="fas fa-info-circle text-2xl"></i> Quien Somos
          </h3>
          <p class="leading-relaxed text-base mb-4 text-text-light">
            Somos un equipo de matronas dedicadas al cuidado integral de la mujer durante el embarazo, parto y postparto. Nuestra misión es acompañarte en esta etapa tan especial con profesionalismo y calidez humana.
          </p>
        </div>
        <div class="section bg-card-bg p-6 rounded-2xl shadow-light flex-1 min-w-80 max-w-sm border border-border-color transition-all duration-300 text-center hover:-translate-y-2 hover:shadow-medium">
          <h3 class="text-xl text-instagram-gradient mb-5 flex items-center justify-center gap-3">
            <i class="fas fa-user-nurse text-2xl"></i> Matronas
          </h3>
          <p class="leading-relaxed text-base mb-4 text-text-light">
            Nuestras matronas cuentan con formación especializada y amplia experiencia en el acompañamiento de embarazos. Estamos comprometidas con tu bienestar y el de tu bebé en cada consulta.
          </p>
        </div>
        <div class="section bg-card-bg p-6 rounded-2xl shadow-light flex-1 min-w-80 max-w-sm border border-border-color transition-all duration-300 text-center hover:-translate-y-2 hover:shadow-medium">
          <h3 class="text-xl text-instagram-gradient mb-5 flex items-center justify-center gap-3">
            <i class="fas fa-baby-carriage text-2xl"></i> Preparación al parto
          </h3>
          <p class="leading-relaxed text-base mb-4 text-text-light">
            Ofrecemos cursos y talleres para prepararte física y emocionalmente para el parto y la maternidad. Aprende con expertas y comparte experiencias con otras futuras mamás.
          </p>
        </div>
      </div>
    </div>
    <!-- Página de Cursos -->
    <div id="cursos" class="content-page max-w-6xl mx-auto my-8 p-5 animate-fadeIn hidden">
      <h1 class="page-title text-4xl mb-6 text-instagram-gradient text-center pb-3 border-b border-border-color">
        <i class="fas fa-book"></i> Cursos
      </h1>
      <div class="filters flex justify-between mb-6 flex-wrap gap-5 bg-card-bg p-5 rounded-xl shadow-light">
        <div class="filter-group flex items-center gap-3">
          <label class="font-medium"><i class="fas fa-filter"></i> Filtrar:</label>
          <select class="py-2 px-4 border border-border-color rounded-lg bg-card-bg cursor-pointer transition-all duration-300 focus:outline-none focus:border-instagram-pink">
            <option>Todos los cursos</option>
            <option>Disponibles</option>
            <option>Próximos</option>
          </select>
        </div>
        <div class="filter-group flex items-center gap-3">
          <label class="font-medium"><i class="fas fa-sort"></i> Ordenar por:</label>
          <select class="py-2 px-4 border border-border-color rounded-lg bg-card-bg cursor-pointer transition-all duration-300 focus:outline-none focus:border-instagram-pink">
            <option>Más vendidos</option>
            <option>Precio: menor a mayor</option>
            <option>Precio: mayor a menor</option>
            <option>Fecha de inicio</option>
          </select>
        </div>
      </div>
      <div class="products-count text-text-light mb-6 text-base">3 productos</div>
      <div class="products-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Producto 1 -->
        <div class="product-card bg-card-bg rounded-2xl overflow-hidden shadow-light border border-border-color transition-all duration-300 hover:-translate-y-2 hover:shadow-medium">
          <img src="Recuperación Postparto en Movimiento" class="product-image w-full h-56 object-cover transition-all duration-300" alt="Curso de Recuperación Postparto en Movimiento">
          <div class="product-info p-5">
            <h3 class="product-title text-xl mb-2">Recuperación Postparto en Movimiento</h3>
            <div class="product-brand text-text-light text-sm mb-3">ZONFEM</div>
            <div class="product-price text-2xl font-bold text-instagram-pink mb-4">$50.000 CLP</div>
            <div class="product-actions flex gap-3 mt-4">
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="addToCart('Recuperación Postparto en Movimiento', 50000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
        <!-- Producto 2 -->
        <div class="product-card bg-card-bg rounded-2xl overflow-hidden shadow-light border border-border-color transition-all duration-300 hover:-translate-y-2 hover:shadow-medium">
          <img src="Movimiento Consciente para el Embarazo" class="product-image w-full h-56 object-cover transition-all duration-300" alt="Curso de Movimiento Consciente para el Embarazo">
          <div class="product-info p-5">
            <h3 class="product-title text-xl mb-2">Movimiento Consciente para el Embarazo</h3>
            <div class="product-brand text-text-light text-sm mb-3">ZONFEM</div>
            <div class="product-price text-2xl font-bold text-instagram-pink mb-4">$50.000 CLP</div>
            <div class="product-actions flex gap-3 mt-4">
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="addToCart('Movimiento Consciente para el Embarazo', 50000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
        <!-- Producto 3 -->
        <div class="product-card bg-card-bg rounded-2xl overflow-hidden shadow-light border border-border-color transition-all duration-300 hover:-translate-y-2 hover:shadow-medium">
          <img src="Curso preparación al parto online" class="product-image w-full h-56 object-cover transition-all duration-300" alt="Curso de Preparación al Parto Online">
          <div class="product-info p-5">
            <h3 class="product-title text-xl mb-2">Curso preparación al parto online</h3>
            <div class="product-brand text-text-light text-sm mb-3">ZONFEM</div>
            <div class="product-price text-2xl font-bold text-instagram-pink mb-4">$40.000 CLP</div>
            <div class="product-actions flex gap-3 mt-4">
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="addToCart('Curso preparación al parto online', 40000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Página de Consultas -->
    <div id="consultas" class="content-page max-w-6xl mx-auto my-8 p-5 animate-fadeIn hidden">
      <h1 class="page-title text-4xl mb-6 text-instagram-gradient text-center pb-3 border-b border-border-color">
        <i class="fas fa-calendar-check"></i> Consultas
      </h1>
      <div class="filters flex justify-between mb-6 flex-wrap gap-5 bg-card-bg p-5 rounded-xl shadow-light">
        <div class="filter-group flex items-center gap-3">
          <label class="font-medium"><i class="fas fa-filter"></i> Filtrar:</label>
          <select class="py-2 px-4 border border-border-color rounded-lg bg-card-bg cursor-pointer transition-all duration-300 focus:outline-none focus:border-instagram-pink">
            <option>Todas las consultas</option>
            <option>Disponibles</option>
            <option>Presenciales</option>
            <option>Online</option>
          </select>
        </div>
        <div class="filter-group flex items-center gap-3">
          <label class="font-medium"><i class="fas fa-sort"></i> Ordenar por:</label>
          <select class="py-2 px-4 border border-border-color rounded-lg bg-card-bg cursor-pointer transition-all duration-300 focus:outline-none focus:border-instagram-pink">
            <option>Más solicitadas</option>
            <option>Precio: menor a mayor</option>
            <option>Precio: mayor a menor</option>
            <option>Duración</option>
          </select>
        </div>
      </div>
      <div class="products-count text-text-light mb-6 text-base">4 productos</div>
      <div class="products-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Producto 1 -->
        <div class="product-card bg-card-bg rounded-2xl overflow-hidden shadow-light border border-border-color transition-all duration-300 hover:-translate-y-2 hover:shadow-medium">
          <img src="Plan personalizado de parto" class="product-image w-full h-56 object-cover transition-all duration-300" alt="Consulta de Plan Personalizado de Parto">
          <div class="product-info p-5">
            <h3 class="product-title text-xl mb-2">Plan personalizado de parto</h3>
            <div class="product-brand text-text-light text-sm mb-3">ZONFEM</div>
            <div class="product-price text-2xl font-bold text-instagram-pink mb-4">$25.000 CLP</div>
            <div class="product-actions flex gap-3 mt-4">
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="addToCart('Plan personalizado de parto', 25000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
        <!-- Producto 2 -->
        <div class="product-card bg-card-bg rounded-2xl overflow-hidden shadow-light border border-border-color transition-all duration-300 hover:-translate-y-2 hover:shadow-medium">
          <img src="Consulta prenatal integrativa" class="product-image w-full h-56 object-cover transition-all duration-300" alt="Consulta Prenatal Integrativa">
          <div class="product-info p-5">
            <h3 class="product-title text-xl mb-2">Consulta prenatal integrativa</h3>
            <div class="product-brand text-text-light text-sm mb-3">ZONFEM</div>
            <div class="product-price text-2xl font-bold text-instagram-pink mb-4">$30.000 CLP</div>
            <div class="product-actions flex gap-3 mt-4">
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="addToCart('Consulta prenatal integrativa', 30000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
        <!-- Producto 3 -->
        <div class="product-card bg-card-bg rounded-2xl overflow-hidden shadow-light border border-border-color transition-all duration-300 hover:-translate-y-2 hover:shadow-medium">
          <img src="Consulta preconcepcional online" class="product-image w-full h-56 object-cover transition-all duration-300" alt="Consulta Preconcepcional Online">
          <div class="product-info p-5">
            <h3 class="product-title text-xl mb-2">Consulta preconcepcional online</h3>
            <div class="product-brand text-text-light text-sm mb-3">ZONFEM</div>
            <div class="product-price text-2xl font-bold text-instagram-pink mb-4">$30.000 CLP</div>
            <div class="product-actions flex gap-3 mt-4">
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="addToCart('Consulta preconcepcional online', 30000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
        <!-- Producto 4 -->
        <div class="product-card bg-card-bg rounded-2xl overflow-hidden shadow-light border border-border-color transition-all duration-300 hover:-translate-y-2 hover:shadow-medium">
          <img src="Consulta postparto online" class="product-image w-full h-56 object-cover transition-all duration-300" alt="Consulta Postparto Online">
          <div class="product-info p-5">
            <h3 class="product-title text-xl mb-2">Consulta postparto online</h3>
            <div class="product-brand text-text-light text-sm mb-3">ZONFEM</div>
            <div class="product-price text-2xl font-bold text-instagram-pink mb-4">$30.000 CLP</div>
            <div class="product-actions flex gap-3 mt-4">
              <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="addToCart('Consulta postparto online', 30000)">
                <i class="fas fa-cart-plus"></i> Agregar al carrito
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Página de Contacto -->
    <div id="contacto" class="content-page max-w-6xl mx-auto my-8 p-5 animate-fadeIn hidden">
      <h1 class="page-title text-4xl mb-6 text-instagram-gradient text-center pb-3 border-b border-border-color">
        <i class="fas fa-address-book"></i> Contacto Directo
      </h1>
      <div class="contact-form bg-card-bg p-9 rounded-2xl shadow-medium border border-border-color max-w-3xl mx-auto">
        <div class="form-group mb-6">
          <label for="name" class="block mb-3 font-medium flex items-center gap-2">
            <i class="fas fa-user"></i> Nombre
          </label>
          <input type="text" id="name" class="w-full py-3 px-4 border border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="Tu nombre completo">
        </div>
        <div class="form-group mb-6">
          <label for="phone" class="block mb-3 font-medium flex items-center gap-2">
            <i class="fas fa-phone"></i> Número de teléfono
          </label>
          <input type="tel" id="phone" class="w-full py-3 px-4 border border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="Tu número de teléfono">
        </div>
        <div class="form-group mb-6">
          <label for="email" class="block mb-3 font-medium flex items-center gap-2">
            <i class="fas fa-envelope"></i> Correo electrónico
          </label>
          <input type="email" id="email" class="w-full py-3 px-4 border border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="Tu correo electrónico">
        </div>
        <div class="form-group mb-6">
          <label for="message" class="block mb-3 font-medium flex items-center gap-2">
            <i class="fas fa-comment"></i> Comentario
          </label>
          <textarea id="message" class="w-full py-3 px-4 border border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10 min-h-40 resize-vertical" placeholder="Escribe tu mensaje aquí. Cuéntanos en qué podemos ayudarte."></textarea>
        </div>
        <button class="submit-btn bg-instagram-gradient text-white border-none py-3 px-9 rounded-full text-base font-bold cursor-pointer transition-all duration-300 block mx-auto mt-8 min-w-48 hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="submitContactForm()">
          <i class="fas fa-paper-plane"></i> Enviar mensaje
        </button>
      </div>
    </div>
  </main>
  <!-- Footer -->
  <footer class="bg-card-bg py-10 px-5 mt-12 border-t border-border-color">
    <div class="footer-content max-w-6xl mx-auto flex flex-wrap justify-between gap-8">
      <div class="footer-section flex-1 min-w-64 text-left">
        <h4 class="text-xl text-instagram-gradient mb-5 flex items-center gap-3">
          <i class="fas fa-map-marker-alt"></i> Ubicación
        </h4>
        <p class="text-text-light mb-3 flex items-center gap-2">
          <i class="fas fa-home"></i> Av. Principal 123, Ciudad
        </p>
        <p class="text-text-light mb-3 flex items-center gap-2">
          <i class="fas fa-phone"></i> Teléfono: (123) 456-7890
        </p>
        <p class="text-text-light mb-3 flex items-center gap-2">
          <i class="fas fa-envelope"></i> Email: info@zonfem.com
        </p>
      </div>
      <div class="footer-section flex-1 min-w-64 text-left">
        <h4 class="text-xl text-instagram-gradient mb-5 flex items-center gap-3">
          <i class="fas fa-clock"></i> Horarios
        </h4>
        <p class="text-text-light mb-3 flex items-center gap-2">
          <i class="fas fa-calendar-day"></i> Lunes a Viernes: 8:00 - 18:00
        </p>
        <p class="text-text-light mb-3 flex items-center gap-2">
          <i class="fas fa-calendar-day"></i> Sábados: 9:00 - 13:00
        </p>
        <p class="text-text-light mb-3 flex items-center gap-2">
          <i class="fas fa-calendar-day"></i> Domingos: Cerrado
        </p>
      </div>
      <div class="footer-section flex-1 min-w-64 text-left">
        <h4 class="text-xl text-instagram-gradient mb-5 flex items-center gap-3">
          <i class="fas fa-share-alt"></i> Síguenos
        </h4>
        <div class="social-icons flex gap-4 mt-5">
          <a href="#" class="social-icon w-12 h-12 rounded-full bg-instagram-gradient text-white flex items-center justify-center no-underline transition-all duration-300 text-lg hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" title="Instagram" aria-label="Síguenos en Instagram">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="#" class="social-icon w-12 h-12 rounded-full bg-instagram-gradient text-white flex items-center justify-center no-underline transition-all duration-300 text-lg hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" title="Facebook" aria-label="Síguenos en Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" class="social-icon w-12 h-12 rounded-full bg-instagram-gradient text-white flex items-center justify-center no-underline transition-all duration-300 text-lg hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" title="Twitter" aria-label="Síguenos en Twitter">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#" class="social-icon w-12 h-12 rounded-full bg-instagram-gradient text-white flex items-center justify-center no-underline transition-all duration-300 text-lg hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" title="WhatsApp" aria-label="Contáctanos por WhatsApp">
            <i class="fab fa-whatsapp"></i>
          </a>
        </div>
      </div>
    </div>
    <div class="copyright mt-10 text-text-light text-sm text-center pt-5 border-t border-border-color">
      &copy; 2025 ZONFEM - Todos los derechos reservados | Cuidando tu embarazo con amor y profesionalismo
    </div>
  </footer>
  <!-- Chat flotante -->
  <div class="chat-button fixed bottom-6 right-6 bg-instagram-gradient text-white py-4 px-6 rounded-3xl font-bold cursor-pointer shadow-heavy z-40 transition-all duration-300 flex items-center gap-3 text-base hover:-translate-y-1 hover:shadow-2xl hover:shadow-instagram-pink/50" onclick="toggleChat()" title="Abrir chat">
    <i class="fas fa-comment"></i> ¿Necesitas ayuda?
  </div>
  <!-- Chat Container -->
  <div class="chat-container fixed bottom-24 right-6 w-96 bg-white rounded-2xl shadow-heavy z-50 hidden flex-col overflow-hidden border border-border-color transition-all duration-300" id="chatContainer">
    <div class="chat-header bg-instagram-gradient text-white py-4 px-5 flex justify-between items-center">
      <h3 class="m-0 text-lg flex items-center gap-3">
        <i class="fas fa-comments"></i> Chat ZONFEM
      </h3>
      <div class="chat-actions flex gap-3">
        <button class="chat-action-btn bg-transparent border-none text-white cursor-pointer text-base transition-all duration-300 hover:scale-110" onclick="minimizeChat()" title="Minimizar" aria-label="Minimizar chat">
          <i class="fas fa-minus"></i>
        </button>
        <button class="chat-action-btn bg-transparent border-none text-white cursor-pointer text-base transition-all duration-300 hover:scale-110" onclick="toggleChat()" title="Cerrar" aria-label="Cerrar chat">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
    <div class="chat-messages flex-1 p-5 overflow-y-auto flex flex-col gap-4 bg-gray-50 custom-scrollbar" id="chatMessages" aria-live="polite">
      <div class="message max-w-[85%] py-3 px-5 rounded-2xl text-base leading-relaxed relative bot-message self-start bg-white text-gray-800 rounded-bl-md shadow-sm">
        ¡Hola! Soy tu asistente de ZONFEM. ¿En qué puedo ayudarte hoy? Puedes preguntarme sobre consultas, cursos, o consultar el estado de tu envío.
      </div>
      <div class="typing-indicator hidden self-start bg-white text-gray-600 py-3 px-5 rounded-2xl italic rounded-bl-md shadow-sm" id="typingIndicator">
        <i class="fas fa-ellipsis-h"></i> Escribiendo...
      </div>
    </div>
    <div class="chat-input-container flex p-4 border-t border-border-color bg-white">
      <input type="text" class="chat-input flex-1 py-3 px-5 border border-border-color rounded-full text-base outline-none transition-all duration-300 focus:border-instagram-pink" id="chatInput" placeholder="Escribe tu mensaje..." onkeypress="handleChatKeyPress(event)">
      <button class="chat-send-btn bg-instagram-pink text-white border-none rounded-full w-12 h-12 ml-3 cursor-pointer flex items-center justify-center transition-all duration-300 hover:bg-instagram-purple hover:scale-105" onclick="sendMessage()" title="Enviar mensaje" aria-label="Enviar mensaje">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>
  <!-- Modal de Carrito -->
  <div id="cartModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm">
    <div class="modal-content bg-card-bg p-9 rounded-2xl w-[450px] max-w-[90%] shadow-heavy border border-border-color relative animate-modalFadeIn cart-modal">
      <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer text-text-light transition-all duration-300 w-7 h-7 flex items-center justify-center rounded-full hover:text-instagram-red hover:bg-black hover:bg-opacity-5" onclick="closeCart()" aria-label="Cerrar carrito">×</span>
      <h2 class="modal-title text-2xl mb-6 text-center text-instagram-gradient flex items-center justify-center gap-3">
        <i class="fas fa-shopping-cart"></i> Carrito de Compras
      </h2>
      <div id="cartItems">
        <p id="cartEmpty">Tu carrito está vacío.</p>
      </div>
      <div class="cart-total mt-5 pt-5 border-t-2 border-border-color flex justify-between font-bold text-lg">
        <span>Total:</span>
        <span id="cartTotal">$0</span>
      </div>
      <div class="cart-actions flex gap-3 mt-6">
        <button class="btn btn-clear py-3 px-6 border-none rounded-xl font-semibold cursor-pointer transition-all duration-300 flex-1 flex items-center justify-center gap-2 bg-text-light text-white hover:bg-gray-600" onclick="clearCart()">
          <i class="fas fa-trash"></i> Vaciar carrito
        </button>
        <button class="btn btn-primary py-3 px-6 border-none rounded-xl font-semibold cursor-pointer transition-all duration-300 flex-1 flex items-center justify-center gap-2 bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="openPaymentModal()">
          <i class="fas fa-credit-card"></i> Proceder al pago
        </button>
      </div>
    </div>
  </div>
  <!-- Modal de Pago -->
  <div id="paymentModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm">
    <div class="modal-content bg-card-bg p-9 rounded-2xl w-[450px] max-w-[90%] shadow-heavy border border-border-color relative animate-modalFadeIn payment-modal">
      <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer text-text-light transition-all duration-300 w-7 h-7 flex items-center justify-center rounded-full hover:text-instagram-red hover:bg-black hover:bg-opacity-5" onclick="closeModal('paymentModal')" aria-label="Cerrar modal">×</span>
      <div class="payment-header text-center mb-6">
        <h2 class="modal-title text-2xl mb-6 text-center text-instagram-gradient flex items-center justify-center gap-3">
          <i class="fas fa-credit-card"></i> Pago en ZONFEM
        </h2>
        <p class="payment-description text-text-light mt-3 text-sm leading-relaxed">
          Ingresa los datos de tu tarjeta para completar tu pago de manera segura.
        </p>
      </div>
      <div class="payment-amount bg-gradient-to-br from-blue-500 to-purple-600 text-white p-5 rounded-xl mb-6 text-center">
        <h3 class="m-0 text-xl font-bold">Monto a pagar: <span id="paymentAmount" class="text-2xl font-extrabold">$24.990</span></h3>
      </div>
      <form class="payment-form bg-card-bg p-0" id="paymentForm">
        <div class="form-group-payment mb-5 relative">
          <label for="cardName" class="block mb-2 font-semibold text-text-dark flex items-center gap-2 text-sm">
            <i class="fas fa-user"></i> Nombre del titular
          </label>
          <input type="text" id="cardName" class="w-full py-3 px-4 border-2 border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10 focus:bg-white" placeholder="Como aparece en la tarjeta" required>
        </div>
        <div class="form-group-payment mb-5 relative">
          <label for="cardNumber" class="block mb-2 font-semibold text-text-dark flex items-center gap-2 text-sm">
            <i class="fas fa-credit-card"></i> Número de tarjeta
          </label>
          <input type="text" id="cardNumber" class="w-full py-3 px-4 border-2 border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10 focus:bg-white" placeholder="1234 5678 9012 3456" maxlength="19" required>
        </div>
        <div class="payment-row flex gap-4">
          <div class="form-group-payment half flex-1 mb-5">
            <label for="cardExpiry" class="block mb-2 font-semibold text-text-dark flex items-center gap-2 text-sm">
              <i class="fas fa-calendar"></i> MM/AA
            </label>
            <input type="text" id="cardExpiry" class="w-full py-3 px-4 border-2 border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10 focus:bg-white" placeholder="MM/AA" maxlength="5" required>
          </div>
          <div class="form-group-payment half flex-1 mb-5">
            <label for="cardCvv" class="block mb-2 font-semibold text-text-dark flex items-center gap-2 text-sm">
              <i class="fas fa-lock"></i> CVV
            </label>
            <input type="text" id="cardCvv" class="w-full py-3 px-4 border-2 border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10 focus:bg-white" placeholder="123" maxlength="3" required>
          </div>
        </div>
        <div class="form-group-payment mb-5">
          <label for="cardEmail" class="block mb-2 font-semibold text-text-dark flex items-center gap-2 text-sm">
            <i class="fas fa-envelope"></i> Correo electrónico
          </label>
          <input type="email" id="cardEmail" class="w-full py-3 px-4 border-2 border-border-color rounded-xl text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10 focus:bg-white" placeholder="tu@email.com" required>
        </div>
        <div class="payment-security bg-gray-50 p-4 rounded-xl my-6 border border-gray-200">
          <div class="security-info flex items-center justify-center gap-3 text-green-600 font-semibold text-sm">
            <i class="fas fa-shield-check text-lg"></i>
            <span>Pago seguro y cifrado</span>
          </div>
        </div>
        <div class="payment-actions flex gap-3 mt-5">
          <button type="button" class="btn btn-secondary bg-gray-600 text-white border-none py-3 px-5 rounded-xl font-semibold cursor-pointer transition-all duration-300 flex-1 flex items-center justify-center gap-2 hover:bg-gray-700 hover:-translate-y-1" onclick="closeModal('paymentModal')">
            <i class="fas fa-arrow-left"></i> Volver al carrito
          </button>
          <button type="submit" class="btn btn-pay bg-gradient-to-br from-green-500 to-teal-500 text-white border-none py-3 px-5 rounded-xl font-semibold cursor-pointer transition-all duration-300 flex-[2] flex items-center justify-center gap-2 hover:from-green-600 hover:to-teal-600 hover:-translate-y-1 hover:shadow-lg hover:shadow-green-500/30">
            <i class="fas fa-lock"></i> Pagar ahora
          </button>
        </div>
      </form>
    </div>
  </div>
  <!-- Modal de Login -->
  <div id="loginModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm">
    <div class="modal-content bg-card-bg p-9 rounded-2xl w-96 max-w-[90%] shadow-heavy border border-border-color relative animate-modalFadeIn">
      <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer text-text-light transition-all duration-300 w-7 h-7 flex items-center justify-center rounded-full hover:text-instagram-red hover:bg-black hover:bg-opacity-5" onclick="closeModal('loginModal')" aria-label="Cerrar modal">×</span>
      <h2 class="modal-title text-2xl mb-6 text-center text-instagram-gradient flex items-center justify-center gap-3">
        <i class="fas fa-user"></i> Iniciar Sesión
      </h2>
      <div class="login-tabs flex mb-6 border-b border-border-color">
        <div class="login-tab flex-1 text-center py-3 cursor-pointer transition-all duration-300 border-b-2 border-transparent font-medium active border-b-2 border-instagram-pink text-instagram-pink font-bold" onclick="switchLoginTab('login')">Iniciar Sesión</div>
        <div class="login-tab flex-1 text-center py-3 cursor-pointer transition-all duration-300 border-b-2 border-transparent font-medium hover:bg-instagram-pink hover:bg-opacity-5" onclick="switchLoginTab('register')">Registrarse</div>
      </div>
      <!-- Formulario de Login -->
      <div id="loginForm" class="login-form active">
        <div class="form-group-modal mb-5">
          <label for="loginEmail" class="block mb-2 font-medium flex items-center gap-2">
            <i class="fas fa-envelope"></i> Correo Electrónico
          </label>
          <input type="email" id="loginEmail" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="tu@email.com" required>
        </div>
        <div class="form-group-modal mb-5">
          <label for="loginPassword" class="block mb-2 font-medium flex items-center gap-2">
            <i class="fas fa-lock"></i> Contraseña
          </label>
          <input type="password" id="loginPassword" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="••••••••" required>
        </div>
        <div class="form-actions flex justify-between mt-6">
          <button type="button" class="btn-link bg-transparent border-none text-instagram-purple underline cursor-pointer font-medium transition-all duration-300 hover:text-instagram-pink" onclick="showForgotPassword()">¿Olvidaste tu contraseña?</button>
          <button type="button" class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="login()">
            <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
          </button>
        </div>
        <div class="social-login mt-6 text-center">
          <div class="social-login-title mb-5 text-text-light text-sm relative">
            O inicia sesión con
          </div>
          <div class="social-buttons flex justify-center gap-4">
            <div class="social-btn w-12 h-12 rounded-full flex items-center justify-center text-white text-xl cursor-pointer transition-all duration-300 social-google bg-red-500 hover:-translate-y-1 hover:shadow-lg" onclick="socialLogin('google')" title="Google" aria-label="Iniciar sesión con Google">
              <i class="fab fa-google"></i>
            </div>
            <div class="social-btn w-12 h-12 rounded-full flex items-center justify-center text-white text-xl cursor-pointer transition-all duration-300 social-facebook bg-blue-600 hover:-translate-y-1 hover:shadow-lg" onclick="socialLogin('facebook')" title="Facebook" aria-label="Iniciar sesión con Facebook">
              <i class="fab fa-facebook-f"></i>
            </div>
          </div>
        </div>
      </div>
      <!-- Formulario de Registro -->
      <div id="registerForm" class="login-form hidden">
        <div class="form-group-modal mb-5">
          <label for="registerName" class="block mb-2 font-medium flex items-center gap-2">
            <i class="fas fa-user"></i> Nombre completo:
          </label>
          <input type="text" id="registerName" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="Tu nombre completo">
        </div>
        <div class="form-group-modal mb-5">
          <label for="registerEmail" class="block mb-2 font-medium flex items-center gap-2">
            <i class="fas fa-envelope"></i> Correo:
          </label>
          <input type="email" id="registerEmail" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="tu@email.com">
        </div>
        <div class="form-group-modal mb-5">
          <label for="registerPassword" class="block mb-2 font-medium flex items-center gap-2">
            <i class="fas fa-lock"></i> Contraseña:
          </label>
          <input type="password" id="registerPassword" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="••••••••">
        </div>
        <div class="form-group-modal mb-5">
          <label for="registerConfirmPassword" class="block mb-2 font-medium flex items-center gap-2">
            <i class="fas fa-lock"></i> Confirmar contraseña:
          </label>
          <input type="password" id="registerConfirmPassword" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="••••••••">
        </div>
        <div class="form-actions">
          <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="register()">
            <i class="fas fa-user-plus"></i> Registrarse
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- Modal de Búsqueda -->
  <div id="searchModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm">
    <div class="modal-content bg-white p-8 rounded-2xl w-[650px] max-w-[90%] shadow-heavy animate-modalFadeIn search-modal-content">
      <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer text-text-light transition-all duration-300 w-7 h-7 flex items-center justify-center rounded-full hover:text-instagram-red hover:bg-black hover:bg-opacity-5" onclick="closeModal('searchModal')" aria-label="Cerrar búsqueda">×</span>
      <h2 class="search-modal-title text-center mb-6 text-2xl text-instagram-red font-bold flex items-center justify-center gap-3">
        <i class="fas fa-search"></i>
        Buscar en ZONFEM
      </h2>
      <div class="search-modal-input-container my-6">
        <div class="search-box relative w-full max-w-lg mx-auto">
          <i class="fas fa-search search-icon absolute left-5 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"></i>
          <input 
            type="text" 
            id="searchInput"
            class="search-modal-input w-full py-4 px-12 border border-gray-300 rounded-full text-base bg-gray-50 transition-all duration-300 outline-none shadow-inner shadow-gray-200 focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/20 focus:bg-white"
            placeholder="¿Qué estás buscando? Ej: control prenatal, cursos..." 
            onkeyup="handleSearch()"
          >
          <i class="fas fa-times clear-icon absolute right-5 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg cursor-pointer transition-all duration-300 w-7 h-7 flex items-center justify-center rounded-full hover:text-pink-400 hover:bg-black hover:bg-opacity-5" 
             id="clearSearch" 
             onclick="document.getElementById('searchInput').value=''; handleSearch();"
          ></i>
        </div>
      </div>
      <div id="searchResults" class="search-modal-results mt-6 p-5 bg-gray-50 rounded-xl hidden max-h-80 overflow-y-auto border border-gray-200">
        <h4 class="mb-3 text-gray-800 font-medium">Resultados:</h4>
        <ul id="resultsList" class="list-none p-0 m-0"></ul>
      </div>
      <button class="search-modal-button w-full mt-5 py-4 px-6 border-none rounded-full text-base font-bold cursor-pointer bg-instagram-gradient text-white transition-all duration-300 flex items-center justify-center gap-3 hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="performSearch()">
        <i class="fas fa-search"></i> Buscar ahora
      </button>
    </div>
  </div>
  <script>
    // --- Variables Globales ---
    let cart = [];
    const cartCountElement = document.getElementById('cartCount');
    const cartTotalElement = document.getElementById('cartTotal');
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-item');
    const dots = document.querySelectorAll('.dot');
    let chatMinimized = false;
    let isTrackingRequested = false;

    // --- Inicialización ---
    document.addEventListener('DOMContentLoaded', function() {
      initNavigation();
      updateCartDisplay();
      initPaymentForm();
      initCarousel(); // Inicializar el carrusel
    });

    // --- Funciones del Carrito ---
    function updateCartDisplay() {
      const cartItemsElement = document.getElementById('cartItems');
      cartCountElement.textContent = cart.reduce((total, item) => total + item.quantity, 0);
      if (cart.length === 0) {
        cartItemsElement.innerHTML = '<p id="cartEmpty">Tu carrito está vacío.</p>';
        cartTotalElement.textContent = '$0';
      } else {
        let itemsHTML = '';
        let total = 0;
        cart.forEach((item, index) => {
          itemsHTML += `
            <div class="cart-item flex justify-between items-center py-4 border-b border-border-color">
              <div class="cart-item-info flex-1">
                <div class="cart-item-name font-medium text-base">${item.name}</div>
                <div class="cart-item-price text-text-light text-sm mt-1">$${item.price.toLocaleString('es-CL')} CLP</div>
                <div class="cart-item-quantity flex items-center gap-3 mt-2">
                  <button class="quantity-btn w-7 h-7 rounded-full border-none bg-light-bg text-text-dark cursor-pointer flex items-center justify-center font-bold transition-all duration-300 hover:bg-instagram-pink hover:text-white hover:scale-110" onclick="updateQuantity(${index}, -1)">-</button>
                  <span class="quantity-value font-bold min-w-6 text-center">${item.quantity}</span>
                  <button class="quantity-btn w-7 h-7 rounded-full border-none bg-light-bg text-text-dark cursor-pointer flex items-center justify-center font-bold transition-all duration-300 hover:bg-instagram-pink hover:text-white hover:scale-110" onclick="updateQuantity(${index}, 1)">+</button>
                </div>
              </div>
              <button class="cart-item-remove bg-transparent border-none text-instagram-red cursor-pointer text-lg transition-all duration-300 w-9 h-9 flex items-center justify-center rounded-full hover:scale-120 hover:bg-red-500 hover:bg-opacity-10" onclick="removeFromCart(${index})" aria-label="Eliminar ${item.name}">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          `;
          total += item.price * item.quantity;
        });
        cartItemsElement.innerHTML = itemsHTML;
        cartTotalElement.textContent = `$${total.toLocaleString('es-CL')} CLP`;
      }
    }

    function addToCart(itemName, price) {
      const existingItemIndex = cart.findIndex(item => item.name === itemName);
      if (existingItemIndex !== -1) {
        cart[existingItemIndex].quantity += 1;
      } else {
        cart.push({ name: itemName, price: price, quantity: 1 });
      }
      updateCartDisplay();
      showNotification(`"${itemName}" agregado al carrito`);
    }

    function updateQuantity(index, change) {
      cart[index].quantity += change;
      if (cart[index].quantity <= 0) {
        removeFromCart(index);
      } else {
        updateCartDisplay();
      }
    }

    function removeFromCart(index) {
      const itemName = cart[index].name;
      cart.splice(index, 1);
      updateCartDisplay();
      showNotification(`"${itemName}" eliminado del carrito`);
    }

    function clearCart() {
      if (cart.length === 0) {
        showNotification('El carrito ya está vacío');
        return;
      }
      cart = [];
      updateCartDisplay();
      showNotification('Carrito vaciado');
    }

    function openPaymentModal() {
      if (cart.length === 0) {
        alert('Tu carrito está vacío');
        return;
      }
      const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      document.getElementById('paymentAmount').textContent = `$${total.toLocaleString('es-CL')}`;
      closeCart();
      document.getElementById('paymentModal').style.display = 'flex';
    }

    // --- Funciones del Carrusel ---
    function initCarousel() {
      // Auto-avance del carrusel
      setInterval(() => moveCarousel(1), 6000);
    }

    function moveCarousel(direction) {
      currentSlide += direction;
      if (currentSlide < 0) currentSlide = slides.length - 1;
      if (currentSlide >= slides.length) currentSlide = 0;
      const carousel = document.querySelector('.carousel');
      carousel.style.transform = `translateX(-${currentSlide * 100}%)`;
      updateDots();
    }

    function goToSlide(index) {
      currentSlide = index;
      const carousel = document.querySelector('.carousel');
      carousel.style.transform = `translateX(-${index * 100}%)`;
      updateDots();
    }

    function updateDots() {
      dots.forEach((dot, index) => {
        if (index === currentSlide) {
          dot.classList.add('active', 'bg-instagram-pink', 'scale-120');
          dot.classList.remove('bg-gray-300');
        } else {
          dot.classList.remove('active', 'bg-instagram-pink', 'scale-120');
          dot.classList.add('bg-gray-300');
        }
      });
    }

    // --- Funciones del Chat ---
    function toggleChat() {
      const chatContainer = document.getElementById('chatContainer');
      if (chatContainer.style.display === 'flex') {
        chatContainer.style.display = 'none';
        chatMinimized = false;
      } else {
        chatContainer.style.display = 'flex';
        chatContainer.classList.remove('minimized');
        chatMinimized = false;
        document.getElementById('chatInput').focus();
      }
    }

    function minimizeChat() {
      const chatContainer = document.getElementById('chatContainer');
      if (chatMinimized) {
        chatContainer.classList.remove('minimized');
        chatMinimized = false;
      } else {
        chatContainer.classList.add('minimized');
        chatMinimized = true;
      }
    }

    function handleChatKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    function sendMessage() {
      const chatInput = document.getElementById('chatInput');
      const message = chatInput.value.trim();
      if (message === '') return;
      addMessage(message, 'user');
      chatInput.value = '';
      showTypingIndicator();
      setTimeout(() => {
        hideTypingIndicator();
        const botResponse = generateBotResponse(message);
        addMessage(botResponse, 'bot');
      }, 1500);
    }

    function addMessage(text, sender) {
      const chatMessages = document.getElementById('chatMessages');
      const messageElement = document.createElement('div');
      messageElement.classList.add('message', 'max-w-[85%]', 'py-3', 'px-5', 'rounded-2xl', 'text-base', 'leading-relaxed', 'relative');
      if (sender === 'user') {
        messageElement.classList.add('user-message', 'self-end', 'bg-instagram-gradient', 'text-white', 'rounded-br-md');
      } else {
        messageElement.classList.add('bot-message', 'self-start', 'bg-white', 'text-gray-800', 'rounded-bl-md', 'shadow-sm');
      }
      if (sender === 'bot' && text.includes('tracking-form')) {
        messageElement.innerHTML = text;
      } else {
        messageElement.textContent = text;
      }
      chatMessages.appendChild(messageElement);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function showTypingIndicator() {
      document.getElementById('typingIndicator').style.display = 'block';
      const chatMessages = document.getElementById('chatMessages');
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function hideTypingIndicator() {
      document.getElementById('typingIndicator').style.display = 'none';
    }

    // --- Funciones del Modal de Pago ---
    function initPaymentForm() {
      const paymentForm = document.getElementById('paymentForm');
      if (paymentForm) {
        paymentForm.addEventListener('submit', processPayment);
      }
      const cardNumberInput = document.getElementById('cardNumber');
      const cardExpiryInput = document.getElementById('cardExpiry');
      if (cardNumberInput) {
        cardNumberInput.addEventListener('input', function(e) {
          let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
          let formattedValue = '';
          for (let i = 0; i < value.length; i++) {
            if (i > 0 && i % 4 === 0) {
              formattedValue += ' ';
            }
            formattedValue += value[i];
          }
          e.target.value = formattedValue;
        });
      }
      if (cardExpiryInput) {
        cardExpiryInput.addEventListener('input', function(e) {
          let value = e.target.value.replace(/[^0-9]/g, '');
          if (value.length >= 2) {
            value = value.substring(0, 2) + '/' + value.substring(2, 4);
          }
          e.target.value = value;
        });
      }
    }

    function processPayment(event) {
      event.preventDefault();
      const cardName = document.getElementById('cardName').value;
      const cardNumber = document.getElementById('cardNumber').value;
      const cardExpiry = document.getElementById('cardExpiry').value;
      const cardCvv = document.getElementById('cardCvv').value;
      const cardEmail = document.getElementById('cardEmail').value;
      if (!cardName || !cardNumber || !cardExpiry || !cardCvv || !cardEmail) {
        alert('Por favor, completa todos los campos.');
        return;
      }
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(cardEmail)) {
        alert('Por favor, ingresa un correo electrónico válido.');
        return;
      }
      const expiryRegex = /^(0[1-9]|1[0-2])\/([0-9]{2})$/;
      if (!expiryRegex.test(cardExpiry)) {
        alert('Por favor, ingresa una fecha de vencimiento válida (MM/AA).');
        return;
      }
      const cvvRegex = /^[0-9]{3,4}$/;
      if (!cvvRegex.test(cardCvv)) {
        alert('Por favor, ingresa un CVV válido (3 o 4 dígitos).');
        return;
      }
      showNotification('Procesando tu pago...');
      setTimeout(() => {
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        alert(`¡Pago exitoso!
  Monto: $${total.toLocaleString('es-CL')} CLP
  Se ha enviado el comprobante a: ${cardEmail}
  Gracias por tu compra en ZONFEM.`);
        cart = [];
        updateCartDisplay();
        document.getElementById('paymentForm').reset();
        closeModal('paymentModal');
        showNotification('¡Pago completado exitosamente!');
      }, 2000);
    }

    // --- Funciones Generales ---
    function openCart() {
      document.getElementById('cartModal').style.display = 'flex';
    }

    function closeCart() {
      document.getElementById('cartModal').style.display = 'none';
    }

    function openLoginModal() {
      document.getElementById('loginModal').style.display = 'flex';
    }

    function openSearch() {
      document.getElementById('searchModal').style.display = 'flex';
      document.getElementById('searchInput').focus();
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    function initNavigation() {
      const navLinks = document.querySelectorAll('.nav-link');
      function mostrarPagina(pageId) {
        navLinks.forEach(link => {
          link.classList.toggle('active', link.getAttribute('data-page') === pageId);
          if (link.getAttribute('data-page') === pageId) {
            link.classList.add('text-instagram-pink', 'bg-opacity-10', 'bg-instagram-pink');
          } else {
            link.classList.remove('text-instagram-pink', 'bg-opacity-10', 'bg-instagram-pink');
          }
        });
        document.querySelectorAll('.content-page').forEach(page => {
          page.classList.toggle('hidden', page.id !== pageId);
          page.classList.toggle('active', page.id === pageId);
        });
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const pageId = this.getAttribute('data-page');
          history.pushState({ page: pageId }, '', `#${pageId}`);
          mostrarPagina(pageId);
        });
      });
      window.addEventListener('popstate', function(event) {
        const pageId = event.state?.page || 'home';
        mostrarPagina(pageId);
      });
      const hash = window.location.hash.substring(1);
      const paginaInicial = hash || 'home';
      history.replaceState({ page: paginaInicial }, '', `#${paginaInicial}`);
      mostrarPagina(paginaInicial);
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'fixed top-5 right-5 bg-instagram-gradient text-white py-4 px-6 rounded-xl shadow-heavy z-50 animate-slideIn max-w-xs flex items-center gap-3';
      notification.innerHTML = `
        <i class="fas fa-check-circle text-xl"></i>
        <span>${message}</span>
      `;
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in forwards';
        setTimeout(() => {
          if (document.body.contains(notification)) {
            document.body.removeChild(notification);
          }
        }, 300);
      }, 4000);
    }

    function submitContactForm() {
      const name = document.getElementById('name').value;
      const phone = document.getElementById('phone').value;
      const email = document.getElementById('email').value;
      const message = document.getElementById('message').value;
      if (!name || !phone || !email || !message) {
        alert('Por favor, completa todos los campos del formulario.');
        return;
      }
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Por favor, ingresa un correo electrónico válido.');
        return;
      }
      alert(`¡Gracias ${name}!
  Tu mensaje ha sido enviado correctamente. Te contactaremos al ${phone} o al correo ${email} en un plazo máximo de 24 horas.`);
      document.getElementById('name').value = '';
      document.getElementById('phone').value = '';
      document.getElementById('email').value = '';
      document.getElementById('message').value = '';
    }

    // --- Funciones de Búsqueda ---
    function handleSearch() {
      const input = document.getElementById('searchInput');
      const clearBtn = document.getElementById('clearSearch');
      const resultsContainer = document.getElementById('searchResults');
      const resultsList = document.getElementById('resultsList');
      if (input.value.trim().length > 0) {
        clearBtn.style.opacity = '1';
      } else {
        clearBtn.style.opacity = '0';
      }
      const query = input.value.toLowerCase();
      const items = [
        { name: "Control prenatal", url: "#home", category: "Servicios" },
        { name: "Consulta prenatal integrativa", url: "#consultas", category: "Consultas" },
        { name: "Curso preparación al parto online", url: "#cursos", category: "Cursos" },
        { name: "Matronas especializadas", url: "#home", category: "Servicios" },
        { name: "Recuperación postparto", url: "#cursos", category: "Cursos" },
        { name: "Contacto", url: "#contacto", category: "Información" },
        { name: "Plan personalizado de parto", url: "#consultas", category: "Consultas" },
        { name: "Movimiento consciente para el embarazo", url: "#cursos", category: "Cursos" }
      ];
      const filtered = items.filter(item => item.name.toLowerCase().includes(query));
      if (query.length === 0) {
        resultsContainer.style.display = 'none';
        return;
      }
      if (filtered.length === 0) {
        resultsList.innerHTML = '<li class="py-4 text-gray-500 text-center"><i class="fas fa-search"></i> No se encontraron resultados.</li>';
      } else {
        resultsList.innerHTML = filtered.map(item => `
          <li class="py-3 px-4 border-b border-gray-200 transition-all duration-200">
            <a href="${item.url}" class="text-instagram-pink no-underline block" onclick="closeModal('searchModal');">
              <div class="font-medium"><i class="fas fa-search"></i> ${item.name}</div>
              <div class="text-xs text-gray-500 mt-1">${item.category}</div>
            </a>
          </li>
        `).join('');
      }
      resultsContainer.style.display = 'block';
    }

    function performSearch() {
      const query = document.getElementById('searchInput').value.trim();
      if (query === '') {
        alert('Por favor, escribe algo para buscar.');
        return;
      }
      showNotification(`Buscando: "${query}"`);
      closeModal('searchModal');
    }

    // --- Funciones de Login ---
    function switchLoginTab(tab) {
      document.querySelectorAll('.login-tab').forEach(t => {
        t.classList.remove('active', 'border-b-2', 'border-instagram-pink', 'text-instagram-pink', 'font-bold');
        t.classList.add('border-transparent');
      });
      document.querySelectorAll('.login-form').forEach(f => {
        f.classList.add('hidden');
        f.classList.remove('active');
      });
      document.querySelector(`.login-tab:nth-child(${tab === 'login' ? 1 : 2})`).classList.add('active', 'border-b-2', 'border-instagram-pink', 'text-instagram-pink', 'font-bold');
      document.getElementById(tab === 'login' ? 'loginForm' : 'registerForm').classList.remove('hidden');
      document.getElementById(tab === 'login' ? 'loginForm' : 'registerForm').classList.add('active');
    }

    function login() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      if (!email || !password) {
        alert('Por favor, completa todos los campos.');
        return;
      }
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Por favor, ingresa un correo electrónico válido.');
        return;
      }
      closeModal('loginModal');
      showNotification('¡Bienvenido/a! Has iniciado sesión correctamente.');
    }

    function register() {
      const name = document.getElementById('registerName').value;
      const email = document.getElementById('registerEmail').value;
      const password = document.getElementById('registerPassword').value;
      const confirmPassword = document.getElementById('registerConfirmPassword').value;
      if (!name || !email || !password || !confirmPassword) {
        alert('Por favor, completa todos los campos.');
        return;
      }
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Por favor, ingresa un correo electrónico válido.');
        return;
      }
      if (password !== confirmPassword) {
        alert('Las contraseñas no coinciden.');
        return;
      }
      if (password.length < 6) {
        alert('La contraseña debe tener al menos 6 caracteres.');
        return;
      }
      closeModal('loginModal');
      showNotification('¡Cuenta creada exitosamente! Ahora puedes iniciar sesión.');
    }

    function showForgotPassword() {
      const loginModalContent = document.querySelector('#loginModal .modal-content');
      const forgotPasswordHTML = `
        <div id="forgotPasswordForm" class="login-form active">
          <div class="form-group-modal mb-5">
            <label for="forgotEmail" class="block mb-2 font-medium flex items-center gap-2">
              <i class="fas fa-envelope"></i> Correo Electrónico
            </label>
            <input type="email" id="forgotEmail" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="tu@email.com" required>
          </div>
          <button class="btn btn-primary w-full text-center py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="submitForgotPassword()">
            <i class="fas fa-key"></i> Recuperar Contraseña
          </button>
          <div class="text-center mt-5">
            <a href="#" onclick="returnToLogin()" class="text-instagram-pink underline font-medium inline-flex items-center gap-1 hover:text-instagram-pink">
              <i class="fas fa-arrow-left"></i> Volver al inicio de sesión
            </a>
          </div>
        </div>
      `;
      loginModalContent.innerHTML = `
        <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer text-text-light transition-all duration-300 w-7 h-7 flex items-center justify-center rounded-full hover:text-instagram-red hover:bg-black hover:bg-opacity-5" onclick="closeModal('loginModal')" aria-label="Cerrar modal">×</span>
        <h2 class="modal-title text-2xl mb-6 text-center text-instagram-gradient flex items-center justify-center gap-3">
          <i class="fas fa-user-lock"></i> Recuperar Contraseña
        </h2>
        ${forgotPasswordHTML}
      `;
    }

    function submitForgotPassword() {
      const email = document.getElementById('forgotEmail').value;
      if (!email) {
        alert('Por favor, ingresa tu correo electrónico.');
        return;
      }
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert('Por favor, ingresa un correo electrónico válido.');
        return;
      }
      alert(`Se ha enviado un enlace de recuperación a: ${email}`);
      returnToLogin();
    }

    function returnToLogin() {
      const loginModalContent = document.querySelector('#loginModal .modal-content');
      loginModalContent.innerHTML = `
        <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer text-text-light transition-all duration-300 w-7 h-7 flex items-center justify-center rounded-full hover:text-instagram-red hover:bg-black hover:bg-opacity-5" onclick="closeModal('loginModal')" aria-label="Cerrar modal">×</span>
        <h2 class="modal-title text-2xl mb-6 text-center text-instagram-gradient flex items-center justify-center gap-3">
          <i class="fas fa-user"></i> Iniciar Sesión
        </h2>
        <div class="login-tabs flex mb-6 border-b border-border-color">
          <div class="login-tab flex-1 text-center py-3 cursor-pointer transition-all duration-300 border-b-2 border-instagram-pink text-instagram-pink font-bold active" onclick="switchLoginTab('login')">Iniciar Sesión</div>
          <div class="login-tab flex-1 text-center py-3 cursor-pointer transition-all duration-300 border-b-2 border-transparent font-medium hover:bg-instagram-pink hover:bg-opacity-5" onclick="switchLoginTab('register')">Registrarse</div>
        </div>
        <div id="loginForm" class="login-form active">
          <div class="form-group-modal mb-5">
            <label for="loginEmail" class="block mb-2 font-medium flex items-center gap-2">
              <i class="fas fa-envelope"></i> Correo Electrónico
            </label>
            <input type="email" id="loginEmail" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="tu@email.com" required>
          </div>
          <div class="form-group-modal mb-5">
            <label for="loginPassword" class="block mb-2 font-medium flex items-center gap-2">
              <i class="fas fa-lock"></i> Contraseña
            </label>
            <input type="password" id="loginPassword" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="••••••••" required>
          </div>
          <div class="form-actions flex justify-between mt-6">
            <button type="button" class="btn-link bg-transparent border-none text-instagram-purple underline cursor-pointer font-medium transition-all duration-300 hover:text-instagram-pink" onclick="showForgotPassword()">¿Olvidaste tu contraseña?</button>
            <button type="button" class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="login()">
              <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
            </button>
          </div>
          <div class="social-login mt-6 text-center">
            <div class="social-login-title mb-5 text-text-light text-sm relative">
              O inicia sesión con
            </div>
            <div class="social-buttons flex justify-center gap-4">
              <div class="social-btn w-12 h-12 rounded-full flex items-center justify-center text-white text-xl cursor-pointer transition-all duration-300 social-google bg-red-500 hover:-translate-y-1 hover:shadow-lg" onclick="socialLogin('google')" title="Google" aria-label="Iniciar sesión con Google">
                <i class="fab fa-google"></i>
              </div>
              <div class="social-btn w-12 h-12 rounded-full flex items-center justify-center text-white text-xl cursor-pointer transition-all duration-300 social-facebook bg-blue-600 hover:-translate-y-1 hover:shadow-lg" onclick="socialLogin('facebook')" title="Facebook" aria-label="Iniciar sesión con Facebook">
                <i class="fab fa-facebook-f"></i>
              </div>
            </div>
          </div>
        </div>
        <div id="registerForm" class="login-form hidden">
          <div class="form-group-modal mb-5">
            <label for="registerName" class="block mb-2 font-medium flex items-center gap-2">
              <i class="fas fa-user"></i> Nombre completo:
            </label>
            <input type="text" id="registerName" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="Tu nombre completo">
          </div>
          <div class="form-group-modal mb-5">
            <label for="registerEmail" class="block mb-2 font-medium flex items-center gap-2">
              <i class="fas fa-envelope"></i> Correo:
            </label>
            <input type="email" id="registerEmail" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="tu@email.com">
          </div>
          <div class="form-group-modal mb-5">
            <label for="registerPassword" class="block mb-2 font-medium flex items-center gap-2">
              <i class="fas fa-lock"></i> Contraseña:
            </label>
            <input type="password" id="registerPassword" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="••••••••">
          </div>
          <div class="form-group-modal mb-5">
            <label for="registerConfirmPassword" class="block mb-2 font-medium flex items-center gap-2">
              <i class="fas fa-lock"></i> Confirmar contraseña:
            </label>
            <input type="password" id="registerConfirmPassword" class="w-full py-3 px-4 border border-border-color rounded-lg text-base bg-light-bg transition-all duration-300 focus:outline-none focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="••••••••">
          </div>
          <div class="form-actions">
            <button class="btn btn-primary py-3 px-6 border-none rounded-full cursor-pointer font-bold transition-all duration-300 inline-flex items-center gap-2 text-base bg-instagram-gradient text-white hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/40" onclick="register()">
              <i class="fas fa-user-plus"></i> Registrarse
            </button>
          </div>
        </div>
      `;
    }

    function socialLogin(provider) {
      showNotification(`Iniciando sesión con ${provider}...`);
    }

    // --- Funciones del Bot del Chat ---
    function generateTrackingInfo(trackingNumber, status) {
      let statusText = '';
      let statusClass = '';
      let steps = [];
      switch(status) {
        case 'pending':
          statusText = 'Pendiente';
          statusClass = 'status-pending';
          steps = [
            { title: 'Pedido recibido', date: 'Hoy, 10:30 AM', completed: true },
            { title: 'En preparación', date: 'Próximamente', completed: false },
            { title: 'Enviado', date: '', completed: false },
            { title: 'Entregado', date: '', completed: false }
          ];
          break;
        case 'processing':
          statusText = 'En proceso';
          statusClass = 'status-processing';
          steps = [
            { title: 'Pedido recibido', date: 'Ayer, 14:20 PM', completed: true },
            { title: 'En preparación', date: 'Hoy, 09:15 AM', completed: true },
            { title: 'Enviado', date: 'Próximamente', completed: false },
            { title: 'Entregado', date: '', completed: false }
          ];
          break;
        case 'shipped':
          statusText = 'Enviado';
          statusClass = 'status-shipped';
          steps = [
            { title: 'Pedido recibido', date: '15/10/2023', completed: true },
            { title: 'En preparación', date: '16/10/2023', completed: true },
            { title: 'Enviado', date: 'Hoy, 11:45 AM', completed: true },
            { title: 'Entregado', date: 'Estimado: 19/10/2023', completed: false }
          ];
          break;
        case 'delivered':
          statusText = 'Entregado';
          statusClass = 'status-delivered';
          steps = [
            { title: 'Pedido recibido', date: '10/10/2023', completed: true },
            { title: 'En preparación', date: '11/10/2023', completed: true },
            { title: 'Enviado', date: '12/10/2023', completed: true },
            { title: 'Entregado', date: '14/10/2023, 15:20 PM', completed: true }
          ];
          break;
      }
      let stepsHTML = '';
      steps.forEach((step, index) => {
        const isLast = index === steps.length - 1;
        const stepIconClass = step.completed ? 'step-completed' : (index === 0 || steps[index-1].completed) ? 'step-current' : 'step-pending';
        const stepIcon = step.completed ? '✓' : (index === 0 || steps[index-1].completed) ? '●' : '○';
        stepsHTML += `
          <div class="tracking-step flex items-center gap-3">
            <div class="step-icon w-7 h-7 rounded-full flex items-center justify-center text-sm ${stepIconClass}">${stepIcon}</div>
            <div class="step-info flex-1">
              <div class="step-title font-medium text-sm">${step.title}</div>
              <div class="step-date text-xs text-gray-500">${step.date}</div>
            </div>
          </div>
          ${!isLast ? `<div class="step-line w-0.5 h-5 bg-gray-300 ml-3.5 ${step.completed ? 'completed' : ''}"></div>` : ''}
        `;
      });
      return `
        <div class="tracking-info bg-white rounded-xl p-5 mt-4 shadow-sm border border-gray-300">
          <div class="tracking-header flex justify-between items-center mb-4">
            <div class="tracking-number font-bold text-instagram-pink text-base">N° de pedido: ${trackingNumber}</div>
            <div class="tracking-status py-1.5 px-3 rounded-xl text-xs font-bold ${statusClass}">${statusText}</div>
          </div>
          <div class="tracking-steps flex flex-col gap-3">
            ${stepsHTML}
          </div>
        </div>
      `;
    }

    function processTrackingForm() {
      const orderNumber = document.getElementById('trackingOrderNumber').value.trim();
      const email = document.getElementById('trackingEmail').value.trim();
      if (!orderNumber || !email) {
        addMessage('Por favor, completa ambos campos para consultar el estado de tu pedido.', 'bot');
        return;
      }
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        addMessage('Por favor, ingresa un correo electrónico válido.', 'bot');
        return;
      }
      showTypingIndicator();
      setTimeout(() => {
        hideTypingIndicator();
        const statuses = ['pending', 'processing', 'shipped', 'delivered'];
        const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
        const trackingInfo = generateTrackingInfo(orderNumber, randomStatus);
        addMessage(`Aquí tienes la información de seguimiento para el pedido ${orderNumber}:` + trackingInfo, 'bot');
        isTrackingRequested = false;
      }, 2000);
    }

    function generateBotResponse(userMessage) {
      const lowerMessage = userMessage.toLowerCase();
      if (lowerMessage.includes('hola') || lowerMessage.includes('buenas')) {
        return '¡Hola! Soy tu asistente de ZONFEM. ¿En qué puedo ayudarte hoy? Puedes preguntarme sobre consultas, cursos, o consultar el estado de tu envío.';
      } else if (lowerMessage.includes('cita') || lowerMessage.includes('consulta') || lowerMessage.includes('agendar')) {
        return 'Puedes agendar una consulta haciendo clic en "Agendar consulta" en nuestra página de inicio o en la sección de consultas. También puedes contactarnos directamente por teléfono o WhatsApp.';
      } else if (lowerMessage.includes('curso') || lowerMessage.includes('taller') || lowerMessage.includes('clase')) {
        return 'Ofrecemos varios cursos y talleres especializados. Puedes verlos todos en la sección "Cursos" de nuestro sitio web. Todos incluyen material de apoyo y certificado de participación.';
      } else if (lowerMessage.includes('precio') || lowerMessage.includes('costo') || lowerMessage.includes('valor')) {
        return 'Los precios de nuestros servicios varían según el tipo de consulta o curso. Puedes encontrar información detallada en las secciones de "Consultas" y "Cursos". También ofrecemos planes personalizados.';
      } else if (lowerMessage.includes('horario') || lowerMessage.includes('disponibilidad') || lowerMessage.includes('cuándo')) {
        return 'Nuestro horario de atención es de lunes a viernes de 8:00 a 18:00 y sábados de 9:00 a 13:00. Para consultas de urgencia fuera de este horario, contamos con un servicio de emergencias.';
      } else if (lowerMessage.includes('embarazo') || lowerMessage.includes('prenatal')) {
        return 'Ofrecemos control prenatal completo con matronas especializadas. Incluye seguimiento mensual, ecografías, asesoramiento nutricional y preparación para el parto. Puedes agendar una consulta en nuestra página.';
      } else if (lowerMessage.includes('parto') || lowerMessage.includes('nacimiento')) {
        return 'Tenemos cursos de preparación al parto y consultas especializadas para resolver todas tus dudas sobre el proceso de parto. ¡Visita nuestra sección de cursos para más información!';
      } else if (lowerMessage.includes('postparto') || lowerMessage.includes('postparto')) {
        return 'Ofrecemos consultas y cursos de recuperación postparto que incluyen cuidado del recién nacido, lactancia materna y recuperación física. Puedes encontrar más información en nuestra página.';
      } else if (lowerMessage.includes('contacto') || lowerMessage.includes('teléfono') || lowerMessage.includes('email')) {
        return 'Puedes contactarnos a través del formulario en la sección "Contacto", llamando al (123) 456-7890, o enviando un WhatsApp al mismo número. Estamos aquí para ayudarte.';
      } else if (lowerMessage.includes('gracias') || lowerMessage.includes('thank')) {
        return '¡De nada! Estoy aquí para ayudarte. ¿Hay algo más en lo que pueda asistirte?';
      } else if (lowerMessage.includes('seguimiento') || lowerMessage.includes('envío') || lowerMessage.includes('entrega') || lowerMessage.includes('pedido') || lowerMessage.includes('estado')) {
        isTrackingRequested = true;
        return `
          <div class="tracking-form bg-white rounded-xl p-5 mt-4 shadow-sm border border-gray-300">
            <p>Para consultar el estado de tu pedido, por favor ingresa:</p>
            <div class="tracking-form-group mb-4">
              <label for="trackingOrderNumber" class="block mb-2 text-sm font-medium text-gray-600">Número de pedido:</label>
              <input type="text" id="trackingOrderNumber" class="w-full py-2.5 px-3.5 border border-gray-300 rounded-lg text-sm outline-none transition-all duration-300 focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="Ej: ZF123456">
            </div>
            <div class="tracking-form-group mb-4">
              <label for="trackingEmail" class="block mb-2 text-sm font-medium text-gray-600">Correo electrónico:</label>
              <input type="email" id="trackingEmail" class="w-full py-2.5 px-3.5 border border-gray-300 rounded-lg text-sm outline-none transition-all duration-300 focus:border-instagram-pink focus:shadow-lg focus:shadow-instagram-pink/10" placeholder="tu@email.com">
            </div>
            <button class="tracking-submit-btn bg-instagram-gradient text-white border-none py-2.5 px-4.5 rounded-xl text-sm font-bold cursor-pointer transition-all duration-300 w-full flex items-center justify-center gap-2 hover:-translate-y-1 hover:shadow-lg hover:shadow-instagram-pink/30" onclick="processTrackingForm()">
              <i class="fas fa-search"></i> Consultar estado
            </button>
          </div>
        `;
      } else {
        return 'Entiendo que quieres información sobre: "' + userMessage + '". Te recomiendo visitar nuestras secciones de Consultas o Cursos, o contactarnos directamente para una atención personalizada. ¿Hay algo específico sobre lo que te gustaría saber más?';
      }
    }

    // --- Event Listeners ---
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Enter' && document.activeElement.id === 'searchInput') {
        performSearch();
      }
      if (e.key === 'Escape') {
        const modals = document.querySelectorAll('.modal');
        modals.forEach(modal => {
          if (modal.style.display === 'flex') {
            modal.style.display = 'none';
          }
        });
        if (document.getElementById('chatContainer').style.display === 'flex' && !chatMinimized) {
          toggleChat(); // Cierra el chat si no está minimizado
        }
      }
    });

    window.onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        event.target.style.display = 'none';
      }
    };
  </script>
</body>
</html>