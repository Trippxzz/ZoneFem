{% load static %}

<div id="loginModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm" style="display: none;">
  <div class="modal-content bg-card-bg p-9 rounded-2xl w-96 max-w-[90%] shadow-heavy border border-border-color relative animate-modalFadeIn">
    <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer" onclick="closeModal('loginModal')">×</span>
    
    <h2 class="modal-title text-2xl mb-6 text-center text-instagram-gradient flex items-center justify-center gap-3">
      <i class="fas fa-user"></i> Acceso
    </h2>
    
    <div class="login-tabs flex mb-6 border-b border-border-color">
      <div id="tab-login" class="login-tab flex-1 text-center py-3 cursor-pointer border-b-2 border-instagram-pink text-instagram-pink font-bold" onclick="switchLoginTab('login')">Login</div>
      <div id="tab-register" class="login-tab flex-1 text-center py-3 cursor-pointer border-b-2 border-transparent" onclick="switchLoginTab('register')">Registro</div>
    </div>
    
    <div id="loginForm" class="login-form active">
      <form method="POST" action="{% url 'login_ajax' %}">
          {% csrf_token %}
          <div class="form-group-modal mb-5">
            <label class="block mb-2 font-medium">Usuario / Correo</label>
            <input type="text" name="username" class="w-full py-3 px-4 border rounded-lg" required placeholder="Usuario">
          </div>
          <div class="form-group-modal mb-5">
            <label class="block mb-2 font-medium">Contraseña</label>
            <input type="password" name="password" class="w-full py-3 px-4 border rounded-lg" required placeholder="••••••">
          </div>
          
          <button type="submit" class="w-full py-3 px-6 rounded-full font-bold bg-instagram-gradient text-white hover:shadow-lg transition-all">
             Iniciar Sesión
          </button>
      </form>
    </div>
    
    <div id="registerForm" class="login-form hidden text-center">
      <p class="mb-6">¿Aún no tienes cuenta? Regístrate para acceder a nuestros servicios.</p>
      <a href="{% url 'registro' %}" class="btn btn-primary w-full py-3 px-6 rounded-full font-bold bg-instagram-gradient text-white inline-block">
         Ir a Registrarse
      </a>
    </div>
  </div>
</div>

<div id="searchModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm" style="display: none;">
    <div class="modal-content bg-white p-8 rounded-2xl w-[650px] relative">
      <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer" onclick="closeModal('searchModal')">×</span>
      <h2 class="text-center mb-6 text-2xl font-bold">Buscar en ZONEFEM</h2>
      <input type="text" id="searchInput" class="w-full py-4 px-6 border rounded-full bg-gray-50" placeholder="Buscar...">
      <button class="w-full mt-5 py-4 rounded-full font-bold bg-instagram-gradient text-white" onclick="performSearch()">Buscar</button>
    </div>
</div>

<div id="cartModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm" style="display: none;">
    <div class="modal-content bg-card-bg p-9 rounded-2xl w-[450px] relative">
      <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer" onclick="closeCart()">×</span>
      <h2 class="text-2xl mb-6 text-center text-instagram-gradient"><i class="fas fa-shopping-cart"></i> Carrito</h2>
      
      <div id="cartItems">
         </div>
      
      <div class="cart-total mt-5 pt-5 border-t flex justify-between font-bold text-lg">
        <span>Total:</span>
        <span id="cartTotal">$0</span>
      </div>
      
      <div class="cart-actions flex gap-3 mt-6">
        <button class="flex-1 py-3 rounded-xl bg-gray-200 hover:bg-gray-300" onclick="clearCart()">Vaciar</button>
        <button class="flex-1 py-3 rounded-xl bg-instagram-gradient text-white font-bold" onclick="openPaymentModal()">Pagar</button>
      </div>
    </div>
</div>

<div id="paymentModal" class="modal fixed inset-0 z-50 hidden justify-center items-center bg-black bg-opacity-50 backdrop-blur-sm" style="display: none;">
    <div class="modal-content bg-card-bg p-9 rounded-2xl w-[450px] relative">
       <span class="btn-close absolute top-4 right-5 text-2xl cursor-pointer" onclick="closeModal('paymentModal')">×</span>
       <h2 class="text-2xl mb-4 text-center">Pago Seguro</h2>
       <h3 class="text-center text-xl font-bold mb-5">Monto: <span id="paymentAmount">$0</span></h3>
       <form id="paymentForm" onsubmit="processPayment(event)">
          <input type="text" id="cardName" class="w-full py-3 px-4 mb-4 border rounded-xl" placeholder="Nombre en la tarjeta" required>
          <input type="text" id="cardNumber" class="w-full py-3 px-4 mb-4 border rounded-xl" placeholder="0000 0000 0000 0000" required>
          <div class="flex gap-3">
             <input type="text" id="cardExpiry" class="w-full py-3 px-4 mb-4 border rounded-xl" placeholder="MM/AA" required>
             <input type="text" id="cardCvv" class="w-full py-3 px-4 mb-4 border rounded-xl" placeholder="CVV" required>
          </div>
          <input type="email" id="cardEmail" class="w-full py-3 px-4 mb-4 border rounded-xl" placeholder="Email comprobante" required>
          <button type="submit" class="w-full py-3 rounded-xl bg-green-500 text-white font-bold hover:bg-green-600">Confirmar Pago</button>
       </form>
    </div>
</div>