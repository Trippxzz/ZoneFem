{% extends 'base.html' %}

{% block title %}Cursos - ZoneFem{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="text-center mb-12">
        <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-instagram-purple via-instagram-pink to-instagram-cyan bg-clip-text text-transparent">
            Cursos Online Disponibles
        </h1>
        <p class="text-gray-600 text-lg">Aprende desde casa con nuestras expertas matronas</p>
    </div>

    <!-- Courses Grid -->
    <!-- DEBUG: Cantidad de cursos: {{ cursos.count }} -->
    {% if cursos %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for curso in cursos %}
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                <!-- Course Image -->
                <div class="relative h-56 overflow-hidden bg-gradient-to-br from-instagram-purple/20 to-instagram-pink/20">
                    {% if curso.imagenes_curso.exists %}
                        {% with imagen_principal=curso.imagenes_curso.all|first %}
                        <img src="{{ imagen_principal.imagen.url }}" 
                             alt="{{ curso.nombre }}" 
                             class="w-full h-full object-cover">
                        {% endwith %}
                    {% else %}
                        <div class="w-full h-full flex items-center justify-center">
                            <i class="fas fa-graduation-cap text-6xl text-instagram-purple opacity-50"></i>
                        </div>
                    {% endif %}
                    
                    <!-- Online Badge -->
                    <div class="absolute top-4 right-4">
                        <span class="px-4 py-2 bg-instagram-cyan text-gray-800 rounded-full text-sm font-medium shadow-lg">
                            <i class="fas fa-laptop mr-1"></i> Online
                        </span>
                    </div>
                </div>

                <!-- Course Info -->
                <div class="p-6">
                    <h3 class="text-2xl font-bold mb-3 text-gray-800 hover:text-instagram-purple transition-colors">
                        <a href="{% url 'detalle_curso' curso.id %}">{{ curso.nombre }}</a>
                    </h3>
                    
                    <p class="text-gray-600 mb-4 line-clamp-3">{{ curso.descripcion|truncatewords:20 }}</p>

                    <!-- Course Details -->
                    <div class="space-y-2 mb-4">
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-user-md w-5 text-instagram-purple"></i>
                            <span class="ml-2 text-sm">{{ curso.matrona.first_name }} {{ curso.matrona.last_name }}</span>
                        </div>
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-clock w-5 text-instagram-purple"></i>
                            <span class="ml-2 text-sm">{{ curso.duracion_horas }} horas</span>
                        </div>
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-calendar-alt w-5 text-instagram-purple"></i>
                            <span class="ml-2 text-sm">Inicio: {{ curso.fecha_inicio|date:"d/m/Y" }}</span>
                        </div>
                        <div class="flex items-center text-gray-700">
                            <i class="fas fa-users w-5 text-instagram-purple"></i>
                            <span class="ml-2 text-sm">
                                {{ curso.cupos_ocupados }}/{{ curso.cupos_disponibles }} cupos
                                {% if not curso.tiene_cupos %}
                                    <span class="text-red-500 font-medium ml-1">(Lleno)</span>
                                {% endif %}
                            </span>
                        </div>
                    </div>

                    <!-- Price and Action -->
                    <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                        <div>
                            <span class="text-3xl font-bold bg-gradient-to-r from-instagram-purple to-instagram-pink bg-clip-text text-transparent">
                                ${{ curso.precio|floatformat:0 }}
                            </span>
                        </div>
                        <a href="{% url 'detalle_curso' curso.id %}" 
                           class="px-6 py-3 bg-gradient-to-r from-instagram-purple to-instagram-pink text-white rounded-full font-medium hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                            Ver m√°s <i class="fas fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-16">
            <i class="fas fa-graduation-cap text-6xl text-gray-300 mb-4"></i>
            <p class="text-xl text-gray-500">No hay cursos disponibles en este momento</p>
        </div>
    {% endif %}
</div>
{% endblock %}
